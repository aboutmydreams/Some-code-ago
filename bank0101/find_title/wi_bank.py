#! -*- encoding:utf-8 -*-
import requests,time,re
from bs4 import BeautifulSoup
# id_list = open('last.txt', 'r')
# l1 = eval(str(id_list.readlines()).replace('\\n','').replace('\\ufeff',''))
# lll = []
# for i in l1 :
#     if i not in lll:
#         lll.append(i)
# print (lll)
# print (len(lll))
# lll = ['农商合作', '农商青年社', '新农商网', '河南农商网', '山东农商网', '农商之家', '福建农商汇', '北农商新青年', '鄂北农商第1城', '金八桂农商大联盟', '乐清农商银行', '岑溪农商银行', '随州农商银行', '炎陵农商银行', '灵石农商银行', '松滋农商银行', '台前农商银行', '临猗农商银行', '白城农商银行', '河津农商银行', '公主岭农商银行', '路桥农商银行', '长垣农商银行', '盱眙农商银行', '桐柏农商银行', '渭滨农商银行', '衡东农商银行', '泗县农商银行', '桐城农商银行', '上虞农商银行', '德州农商银行', '湘乡农商银行', '珲春农商银行', '惠东农商银行', '宁都农商银行', '平原农商银行', '慈利农商银行', '万安农商银行', '长兴农商银行', '荆门农商银行', '景宁农商银行', '衡南农商银行', '龙泉农商银行', '六安农商银行', '乐陵农商银行', '乌拉特农商银行', '浦江农商银行', '阆中农商银行', '潜山农商银行', '五台农商银行', '惠州农商银行', '武城农商银行', '六盘水农商银行', '宜都农商银行', '仙居农商银行', '吴兴农商银行', '孟州农商银行', '咸宁农商银行', '岱山农商银行', '平江农商银行', '平利农商银行', '寿阳农商银行', '屯溪农商银行', '武乡农商银行', '太谷农商银行', '安塞农商银行', '休宁农商银行', '湘阴农商银行', '松阳农商银行', '长葛农商银行', '祁门农商银行', '紫阳农商银行', '涉县农商银行', '平顺农商银行', '托克托农商银行', '石首农商银行', '汝阳农商银行', '兴县农商银行', '岳阳农商银行', '兴山农商银行', '太白农商银行', '龙门农商银行', '怀来农商银行', '湄潭农商银行', '麻城农商银行', '孝感农商银行', '遂昌农商银行', '双峰农商银行', '黄石农商银行', '岚皋农商银行', '汝南农商银行', '常德农商银行', '麟游农商银行', '大安农商银行', '北安农商银行', '赤壁农商银行', '韶山农商银行', '益阳农商银行', '大悟农商银行', '5没有相关公众号 已跳过6没有相关公众号 已跳过只显示100农商青年', '只显示100农商青年', '只显示100襄垣农商行', '潞城农商行', '睢宁农商行', '壶关农商行', '清河农商行', '当阳农商行', '黎城农商行', '凤翔农商行', '黄梅农商行', '安化农商行', '靖安农商行', '子长农商行', '保靖农商行', '黄岩农商行', '土右农商行', '宋都农商行', '阳曲农商行黄寨支行', '阳曲农商行城关支行', '铜仁农商行江华支行', '大同北都农商行', '长治黎都农商行', '鹿城农商行卡中心', '九台农商行网络学院', '张店农商行怡海世家支行', '河源农商行时代花园社区银行', '温岭农商行团委', '东丰农商行微银行', '晋城农商行微客服', '农商行', '农商行研究', '农商行金珠', '农商行锦绣', '农商行徐小琴', '农商行体育街', '颍上农商行', '贞丰农商行', '农商行五路居分理处', '南皮农商行', '蕲春农商行', '农商行小邓', '绥芬河农商行', '农商行吉劳庆支行', '农商行小望', '茌平农商行', '长子农商行', '鸡西农商行', '吉首农商行', '利津农商行', '阜宁农商行', '农商行开县汉丰贷款中心', '晋城农商行南城行', '保康农商行', '襄垣农商行财富直通车', '凤阳农商行', '鹿农商行营业部', '农信社农商行考试', '泽州农商行金村支行', '静宁农商行简讯', '襄垣农商行城关支行', '长春农商行大马路支行', '陕坝农商行营业部', '泽州农商行营业部', '东营农商行淮河路分理处', '石林农商行', '晋城农商行东城行', '河源农商行雅居乐社区银行', '长治农商行融泰支行', '泽州农商行新市东街支行', '北京农商行天通苑财富管理', '鄂尔多斯农商行伊西', '阜南农商行天棚行', '叙永农商行放心贷', '陕坝农商行跃进支行', '繁昌农商行三山支行', '长治农商行大北街支行', '长治黎都农商行营业部', '晋城农商行总行营业部', '潜山农商行黄柏支行', '鄂尔多斯农商行祥泰', '襄垣农商行太行路支行', '临清农商行古城', '鄂尔多斯农商行创业', '长治农商行消费e贷', '萍乡农商行', '荆州农商行沙市支行', '长春农商行绿园支行', '浙江苍南农商行订阅号', '白河农商行案防', '江南农商行春江支行', '临城农商行', '乡宁农商行西坡支行', '晋城农商行景西行', '吉安农商行信贷小百科', '长治农商行延中支行', '吉安农商行微社区', '建德农商行保全中心', '鄂尔多斯农商行长青支行', '鄂尔多斯农商行东兴', '潞城农商行山化分理处', '余杭农商行崇贤支行', '只显示100乐清农商银行', '通山农商银行', '鹿邑农商银行', '郴州农商银行', '老河口农商银行', '定州农商银行', '徽州农商银行', '南漳农商银行', '榆社农商银行', '广水农商银行', '南县农商银行', '新宁农商银行', '交城农商银行', '云和农商银行', '定西农商银行', '沙县农商银行', '千阳农商银行', '偃师农商银行', '嵊泗农商银行', '只显示100淮安农村商业银行', '郯城农村商业银行', '凯里农村商业银行订阅号', '新沂农村商业银行', '广丰农村商业银行', '安顺农村商业银行', '来凤农村商业银行', '慈溪农村商业银行', '华容农村商业银行', '山阴农村商业银行', '贺兰农村商业银行', '澧县农村商业银行', '中宁农村商业银行', '安乡农村商业银行', '潜江农村商业银行', '汕尾农村商业银行', '临澧农村商业银行', '绛县农村商业银行', '民勤农村商业银行', '辉南农村商业银行', '闻喜农村商业银行', '鄂州农村商业银行', '庐江农村商业银行', '方正农村商业银行', '安图农村商业银行', '花垣农村商业银行', '晴隆农村商业银行', '宁海农村商业银行', '天柱农村商业银行', '龙山农村商业银行', '共和农村商业银行', '余杭农村商业银行', '吉林汪清农村商业银行', '贵州紫云农村商业银行', '湖北竹溪农村商业银行', '陕西陇县农村商业银行', '湖北丹江口农村商业银行', '湖北郧西农村商业银行', '湖北武当山农村商业银行', '贵州惠水农村商业银行', '江苏灌云农村商业银行', '山西襄汾农村商业银行', '山西洪洞农村商业银行', '湖南汉寿农村商业银行', '山东阳谷农村商业银行', '高要农村商业银行客户服务', '陕坝农村商业银行', '博山农村商业银行股份有限公司', '察右前旗农村商业银行', '武汉农村商业银行', '河套农村商业银行', '普陀农村商业银行', '杨凌农村商业银行', '太仆寺农村商业银行', '扶绥农村商业银行', '江陵农村商业银行', '隆昌农村商业银行', '那坡农村商业银行', '黄河农村商业银行营业部', '安徽旌德农村商业银行', '江南农村商业银行靖江支行', '江苏丰县农村商业银行', '黟县农村商业银行', '宜春农村商业银行', '利川农村商业银行', '湖北五峰农村商业银行', '双牌农村商业银行', '宣恩农村商业银行', '武威农村商业银行', '吴忠农村商业银行', '湖南桑植农村商业银行', '广东河源农村商业银行', '新乡平原农村商业银行', '通城农村商业银行', '吉林通化海科农村商业银行', '汝城延寿农村商业银行', '灌云农村商业银行微贷中心', '龙山农村商业银行苗市支行', '湖南城步农村商业银行股份有限公司', '江西共青农村商业银行', '营口农村商业银行股份有限公司', '济南农村商业银行马山支行']
lll = ['农商合作', '农商青年社', '新农商网', '河南农商网', '山东农商网', '农商之家', '福建农商汇', '北农商新青年', '鄂北农商第1城', '金八桂农商大联盟', '乐清农商银行', '岑溪农商银行', '随州农商银行', '炎陵农商银行', '灵石农商银行', '松滋农商银行', '台前农商银行', '临猗农商银行', '白城农商银行', '河津农商银行', '公主岭农商银行', '路桥农商银行', '长垣农商银行', '盱眙农商银行', '桐柏农商银行', '渭滨农商银行', '衡东农商银行', '泗县农商银行', '桐城农商银行', '上虞农商银行', '德州农商银行', '湘乡农商银行', '珲春农商银行', '惠东农商银行', '宁都农商银行', '平原农商银行', '慈利农商银行', '万安农商银行', '长兴农商银行', '荆门农商银行', '景宁农商银行', '衡南农商银行', '龙泉农商银行', '六安农商银行', '乐陵农商银行', '乌拉特农商银行', '浦江农商银行', '阆中农商银行', '潜山农商银行', '五台农商银行', '惠州农商银行', '武城农商银行', '六盘水农商银行', '宜都农商银行', '仙居农商银行', '吴兴农商银行', '孟州农商银行', '咸宁农商银行', '岱山农商银行', '平江农商银行', '平利农商银行', '寿阳农商银行', '屯溪农商银行', '武乡农商银行', '太谷农商银行', '安塞农商银行', '休宁农商银行', '湘阴农商银行', '松阳农商银行', '长葛农商银行', '祁门农商银行', '紫阳农商银行', '涉县农商银行', '平顺农商银行', '托克托农商银行', '石首农商银行', '汝阳农商银行', '兴县农商银行', '岳阳农商银行', '兴山农商银行', '太白农商银行', '龙门农商银行', '怀来农商银行', '湄潭农商银行', '麻城农商银行', '孝感农商银行', '遂昌农商银行', '双峰农商银行', '黄石农商银行', '岚皋农商银行', '汝南农商银行', '常德农商银行', '麟游农商银行', '大安农商银行', '北安农商银行', '赤壁农商银行', '韶山农商银行', '益阳农商银行', '大悟农商银行', '5没有相关公众号 已跳过6没有相关公众号 已跳过只显示100农商青年', '只显示100农商青年', '只显示100襄垣农商行', '潞城农商行', '睢宁农商行', '壶关农商行', '清河农商行', '当阳农商行', '黎城农商行', '凤翔农商行', '黄梅农商行', '安化农商行', '靖安农商行', '子长农商行', '保靖农商行', '黄岩农商行', '土右农商行', '宋都农商行', '阳曲农商行黄寨支行', '阳曲农商行城关支行', '铜仁农商行江华支行', '大同北都农商行', '长治黎都农商行', '鹿城农商行卡中心', '九台农商行网络学院', '张店农商行怡海世家支行', '河源农商行时代花园社区银行', '温岭农商行团委', '东丰农商行微银行', '晋城农商行微客服', '农商行', '农商行研究', '农商行金珠', '农商行锦绣', '农商行徐小琴', '农商行体育街', '颍上农商行', '贞丰农商行', '农商行五路居分理处', '南皮农商行', '蕲春农商行', '农商行小邓', '绥芬河农商行', '农商行吉劳庆支行', '农商行小望', '茌平农商行', '长子农商行', '鸡西农商行', '吉首农商行', '利津农商行', '阜宁农商行', '农商行开县汉丰贷款中心', '晋城农商行南城行', '保康农商行', '襄垣农商行财富直通车', '凤阳农商行', '鹿农商行营业部', '农信社农商行考试', '泽州农商行金村支行', '静宁农商行简讯', '襄垣农商行城关支行', '长春农商行大马路支行', '陕坝农商行营业部', '泽州农商行营业部', '东营农商行淮河路分理处', '石林农商行', '晋城农商行东城行', '河源农商行雅居乐社区银行', '长治农商行融泰支行', '泽州农商行新市东街支行', '北京农商行天通苑财富管理', '鄂尔多斯农商行伊西', '阜南农商行天棚行', '叙永农商行放心贷', '陕坝农商行跃进支行', '繁昌农商行三山支行', '长治农商行大北街支行', '长治黎都农商行营业部', '晋城农商行总行营业部', '潜山农商行黄柏支行', '鄂尔多斯农商行祥泰', '襄垣农商行太行路支行', '临清农商行古城', '鄂尔多斯农商行创业', '长治农商行消费e贷', '萍乡农商行', '荆州农商行沙市支行', '长春农商行绿园支行', '浙江苍南农商行订阅号', '白河农商行案防', '江南农商行春江支行', '临城农商行', '乡宁农商行西坡支行', '晋城农商行景西行', '吉安农商行信贷小百科', '长治农商行延中支行', '吉安农商行微社区', '建德农商行保全中心', '鄂尔多斯农商行长青支行', '鄂尔多斯农商行东兴', '潞城农商行山化分理处', '余杭农商行崇贤支行', '只显示100乐清农商银行', '通山农商银行', '鹿邑农商银行', '郴州农商银行', '老河口农商银行', '定州农商银行', '徽州农商银行', '南漳农商银行', '榆社农商银行', '广水农商银行', '南县农商银行', '新宁农商银行', '交城农商银行', '云和农商银行', '定西农商银行', '沙县农商银行', '千阳农商银行', '偃师农商银行', '嵊泗农商银行', '只显示100淮安农村商业银行', '郯城农村商业银行', '凯里农村商业银行订阅号', '新沂农村商业银行', '广丰农村商业银行', '安顺农村商业银行', '来凤农村商业银行', '慈溪农村商业银行', '华容农村商业银行', '山阴农村商业银行', '贺兰农村商业银行', '澧县农村商业银行', '中宁农村商业银行', '安乡农村商业银行', '潜江农村商业银行', '汕尾农村商业银行', '临澧农村商业银行', '绛县农村商业银行', '民勤农村商业银行', '辉南农村商业银行', '闻喜农村商业银行', '鄂州农村商业银行', '庐江农村商业银行', '方正农村商业银行', '安图农村商业银行', '花垣农村商业银行', '晴隆农村商业银行', '宁海农村商业银行', '天柱农村商业银行', '龙山农村商业银行', '共和农村商业银行', '余杭农村商业银行', '吉林汪清农村商业银行', '贵州紫云农村商业银行', '湖北竹溪农村商业银行', '陕西陇县农村商业银行', '湖北丹江口农村商业银行', '湖北郧西农村商业银行', '湖北武当山农村商业银行', '贵州惠水农村商业银行', '江苏灌云农村商业银行', '山西襄汾农村商业银行', '山西洪洞农村商业银行', '湖南汉寿农村商业银行', '山东阳谷农村商业银行', '高要农村商业银行客户服务', '陕坝农村商业银行', '博山农村商业银行股份有限公司', '察右前旗农村商业银行', '武汉农村商业银行', '河套农村商业银行', '普陀农村商业银行', '杨凌农村商业银行', '太仆寺农村商业银行', '扶绥农村商业银行', '江陵农村商业银行', '隆昌农村商业银行', '那坡农村商业银行', '黄河农村商业银行营业部', '安徽旌德农村商业银行', '江南农村商业银行靖江支行', '江苏丰县农村商业银行', '黟县农村商业银行', '宜春农村商业银行', '利川农村商业银行', '湖北五峰农村商业银行', '双牌农村商业银行', '宣恩农村商业银行', '武威农村商业银行', '吴忠农村商业银行', '湖南桑植农村商业银行', '广东河源农村商业银行', '新乡平原农村商业银行', '通城农村商业银行', '吉林通化海科农村商业银行', '汝城延寿农村商业银行', '灌云农村商业银行微贷中心', '龙山农村商业银行苗市支行', '湖南城步农村商业银行股份有限公司', '江西共青农村商业银行', '营口农村商业银行股份有限公司', '济南农村商业银行马山支行', '鄂尔多斯农村商业银行民生街支行', '鄂尔多斯农村商业银行东伟支行', '博罗农村商业银行', '余杭农村商业银行乔司支行', '榆次农村商业银行百货广场支行', '长丰农村商业银行(订阅号)', '凤台农村商业银行', '长白山农村商业银行', '深圳农村商业银行龙华支行', '太仓农村商业银行扬中支行', '黄河农村商业银行银川胜利支行', '肥西农村商业银行', '深圳农村商业银行布吉支行', '响水农村商业银行订阅号', '乳山农村商业银行', '长治漳泽农村商业银行', '滨州农村商业银行股份有限公司', '武夷山农村商业银行', '淮安农村商业银行', '柳河农村商业银行股份有限公司', '9没有相关公众号 已跳过只显示100安溪农信社', '长汀农信社', '永春农信社', '鼎湖农信社', '台山农信社', '连州农信社', '梅县农信社', '佛冈农信社', '鹤山农信社', '吴川农信社', '清丰农信社', '廉江农信社', '兴业农信社', '依安农信社', '麻章农信社', '安新县农信社', '东海农信社', '濮阳市区农信社', '河南农信社考试', '辽宁农信社招考资讯', '农信社滨河东路分社', '濮阳县农信社', '遂溪农信社', '平顶山农信社', '乌什县农信社', '临澧农信社', '徐闻农信社', '农信社考试', '蕉岭农信社', '容县农信社', '轮台县农信社', '陆川农信社', '罗城农信社', '杜蒙农信社', '泉州农信社农商银行', '瑞金农信社', '贵州农信社招聘', '杭锦旗锡尼农信社', '农信社招考资讯', '官厂农信社', '农信社招聘网', '任丘市青塔农信社', '农信社小陈', '和林格尔县农信社城关党支部', '六硍农信社', '峨眉山胜利农信社', '农信社贷款咨询平台', '钟山农信社', '农信社不良贷款清收管理', '隆回农信社', '四川农信社微学习', '沁源农信社', '罗源农信社', '明溪农信社', '沁县农信社', '上思农信社', '兴隆台区农信社', '苍梧农信社', '平舆县农信社', '汶川农信社', '福州农信社农商银行', '农信社考试网', '农信社招聘考试', '淅川县农信社', '周口农信社', '三明市农信社农商银行', '农信社改制', '农商行农信社网点管理', '磁县农信社', '翁旗农信社', '鹤壁市农信社', '双池农信社', '南平市农信社农商行', '四川农信社招聘网', '仁化农信社', '辽宁农信社招聘网', '柘城农信社新闻', '德保农信社', '杭锦旗阿斯楞图农信社', '九里山农信社', '李村农信社', '朝阳市龙城农信社', '翁牛特旗农信社', '农信社公文模板', '宣化农信社胜利南路分社', '巨巾号农信社', '四川农信社考试中心', '泰安市岱岳区高新开发区农信社', '唐庄农信社', '豆门农信社', '王边农信社', '松原大洼农信社', '湖南农信社考试', '河北铺农信社', '郸城农信社营业部', '浙江农信社考试网', '濮阳县子岸农信社', '延津农信社塔铺分社', '惠安农村信用社', '梨树县农村信用社', '枣强县农村信用社', '柘荣农村信用社', '伊通县农村信用社', '赤坎农村信用社', '海林市农村信用社', '武邑县农村信用社', '牡丹江市农村信用社', '喀喇沁旗农村信用社', '四平城区农村信用社', '阜蒙县农村信用社', '广东省农村信用社联合社', '农村信用社考试网', '南乐县农村信用社', '荣县农村信用社', '嫩江农村信用社', '道真县农村信用社', '河南农村信用社', '邯郸县农村信用社', '灵宝市农村信用合作联社城西信用社', '河南省农村信用社', '福鼎市农村信用社', '承德县农村信用社', '天峨县农村信用社', '沁阳市农村信用社', '霍林郭勒市农村信用社', '长顺县农村信用社', '长白县农村信用社', '双辽市农村信用社', '北票市农村信用社', '农村信用社', '宝鸡农村信用社农商银行', '库伦旗农村信用社', '古田县农村信用社', '依兰县农村信用社', '蓬安县农村信用社', '绥中县农村信用社', '茂名市农村信用合作社联合社', '阿尔山市农村信用合作社', '红寺堡区农村信用合作社', '只显示100仙游县农村信用合作联社', '福安市农村信用合作联社', '英德市农村信用合作联社', '封开县农村信用合作联社', '光泽县农村信用合作联社', '武宣县农村信用合作联社', '藤县农村信用合作联社', '和林格尔县农村信用合作联社', '河间市农村信用合作联社', '杭锦旗农村信用合作联社', '兴宁市农村信用合作联社', '新乡县农村信用合作联社', '金沙县农村信用合作联社', '准格尔旗农村信用合作联社', '涿鹿县农村信用合作联社', '平和县农村信用合作联社', '渭源县农村信用合作联社', '清水河县农村信用合作联社', '温县农村信用合作联社', '德庆县农村信用合作联社', '习水县农村信用合作联社', '肇东市农村信用合作联社', '赤水市农村信用合作联社', '穆棱市农村信用合作联社', '磴口县农村信用合作联社', '云霄县农村信用合作联社', '忻城县农村信用合作联社', '防城区农村信用合作联社', '固安县农村信用合作联社', '尉犁县农村信用合作联社', '岳阳县农村信用合作联社', '莫旗农村信用合作联社', '卫辉市农村信用合作联社', '商都县农村信用合作联社', '富锦市农村信用合作联社', '巴林右旗农村信用合作联社', '汤原县农村信用合作联社', '景洪市农村信用合作联社', '鸡东县农村信用合作联社', '东辽县农村信用合作联社', '岳普湖县农村信用合作联社', '兴和县农村信用合作联社', '桦川县农村信用合作联社', '兴隆县农村信用合作联社', '寿宁县农村信用合作联社', '德化县农村信用合作联社', '武山县农村信用合作联社', '南宁市区农村信用合作联社', '镇宁县农村信用合作联社', '贵州罗甸农村信用合作联社', '河池市区农村信用合作联社', '玉林市区农村信用合作联社', '牡丹江市城郊农村信用合作联社', '木垒县农村信用合作联社', '环江县农村信用合作联社', '廊坊市城郊农村信用合作联社', '伊金霍洛旗矿区农村信用合作联社', '通辽市科尔沁区农村信用合作联社', '邵武市农村信用合作联社订阅号', '浦城县农村信用合作联社订阅号', '清远市清新区农村信用合作联社', '新巴尔虎右旗农村信用合作联社', '科右前旗农村信用合作联社', '科左后旗农村信用合作联社', '政和县农村信用合作联社', '永宁县农村信用合作联社', '木兰县农村信用合作联社', '多伦县农村信用合作联社', '隆德县农村信用合作联社', '周宁县农村信用合作联社', '和布克赛尔县农村信用合作联社', '巴林左旗农村信用合作联社', '乌兰浩特市农村信用合作联社', '杞县农村信用合作联社', '焉耆县农村信用合作联社', '将乐县农村信用合作联社', '梅河口市农村信用合作联社', '雄县农村信用合作联社', '博爱县农村信用合作联社', '镇赉县农村信用合作联社', '曲阳县农村信用合作联社', '新巴尔虎左旗农村信用合作联社', '昌黎县农村信用合作联社', '铁力市农村信用合作联社', '广宁县农村信用合作联社', '岷县农村信用合作联社', '石门县农村信用合作联社', '甘谷县农村信用合作联社', '稷山县农村信用合作联社', '武川县农村信用合作联社', '化德县农村信用合作联社', '焦作市马村区农村信用合作联社', '汨罗市农村信用合作联社', '正蓝旗农村信用合作联社', '盖州市农村信用合作联社', '和硕县农村信用合作联社', '高碑店市农村信用合作联社', '平坝县农村信用合作联社', '安平县农村信用合作联社', '盘山县农村信用合作联社', '北仑农信联社', '山阳区农信联社', '察右后旗农信联社', '林州市农信联社', '宁海农信联社', '解放农信联社', '淇县农信联社', '土左农信联社', '龙游农信联社机房', '浙江省农信联社宁波办事处', '安阳市区农信联社', '凉城县农信联社', '西华农信联社营业部', '潮阳农信联社', '华安农信联社', '内黄县农信联社', '临西农信联社营业部', '郑州市市区农信联社', '邓州农信联社营业部', '浙江省农信联社丽水办事处', '临漳农信联社营业部', '省农信联社电子银行处', '联合恒瑞潍坊农信联社专用号', '联合黄金涪城农信联社报价专用号', '省农信联社舟山办事处', '联合恒瑞什邡农信合作联社专用号', '福建省农信联社三明办事处', '西华县农信联社', '象山农信联社团委', '4没有相关公众号 已跳过只显示100隰县信用联社', '丰镇市农村信用联社', '东光县农村信用联社', '安国市农村信用联社股份有限公司', '海兴县农村信用联社股份有限公司', '吴桥县农村信用联社股份有限公司', '定兴县农村信用联社股份有限公司', '怀安县农村信用联社股份有限公司', '仙游县农村信用合作联社', '铜山信用联社', '垣曲县信用联社', '建昌信用联社', '溆浦信用联社', '铜鼓县农村信用联社', '五大连池市农村信用联社', '泊头市农村信用联社股份有限公司', '顺平县农村信用联社股份有限公司', '临县农信办公室', '威县农信网', '巴彦农信惠民网', '供销联社', '高阳联社', '安泽联社', '乌审旗联社', '工联社', '尖扎联社', '洋县联社', '曲沃联社', '二道江区联社', '开平市供销合作联社', '扎兰屯市供销合作联社', '包头南郊联社', '河南益民联社', '谷溪会员联社', '杨箕股份合作经济联社', '利牧养殖扶贫联社', '烟台市轻工联社', '保联社', '财联社', '影联社', '隰县信用联社', '顺昌联社', '唐河联社', '车联社', '视联社', '留联社', '百联社', '职联社', '宏联社', '封丘县农村信用合作联社', '华尔街联社', '行联社', '镇远县联社', '永和联社', '平南县农村信用合作联社', '浑源县农村信用合作联社', '轮台县农村信用合作联社', '拜城县农村信用合作联社', '洛浦县农村信用合作联社', '印江县农村信用合作联社', '景泰县农村信用合作联社', '商城县农村信用合作联社', '只显示100丰镇市农村信用联社', '只显示100隰县信用联社', '只显示100长汀村镇银行', '村镇银行微金融', '景洪民生村镇银行', '普洱民生村镇银行', '腾冲民生村镇银行', '上海嘉定民生村镇银行', '新余成功村镇银行', '宁化成功村镇银行', '土默特左旗金谷村镇银行', '凌源天元村镇银行', '平阴蓝海村镇银行', '湖南省村镇银行协会', '惠州东盈村镇银行', '江苏大丰江南村镇银行', '山东金乡蓝海村镇银行', '安化湘淮村镇银行', '冷水江湘淮村镇银行', '福建将乐成功村镇银行', '新疆建新成功村镇银行', '湖北红安长江村镇银行', '鄂托克兴生源村镇银行', '湖北赤壁长江村镇银行', '北京昌平包商村镇银行', '昆明宜良融丰村镇银行', '新余渝水湘淮村镇银行', '榆次融信村镇银行订阅号', '昆明寻甸中成村镇银行', '信阳平桥中原村镇银行动态', '扬州广陵中成村镇银行', '大连金州联丰村镇银行', '湖南湘潭湘淮村镇银行', '鄂尔多斯市塔拉壕金谷村镇银行', '乌海千里山河套村镇银行', '化德包商村镇银行订阅号', '河津龙都村镇银行', '宁武瑞都村镇银行', '太原信都村镇银行', '南丰桔都村镇银行', '太仓民生村镇银行股份有限公司', '嵊州瑞丰村镇银行', '浑源慧融村镇银行', '桓台青隆村镇银行', '周村青隆村镇银行', '东光青隆村镇银行营业部', '岚县慧融村镇银行订阅号', '乐东惠丰村镇银行股份有限公司', '东阿青隆村镇银行订阅号', '黄骅青隆村镇银行订阅号', '莘县青隆村镇银行订阅号', '青县青隆村镇银行股份有限公司', '方大村镇银行', '珠江村镇银行', '临川浦发村镇银行', '宝坻浦发村镇银行', '江阴浦发村镇银行', '长垣民生村镇银行', '潼南民生村镇银行', '綦江民生村镇银行', '辉县珠江村镇银行', '兰西农商村镇银行', '商河汇金村镇银行', '石河子交银村镇银行', '北京大兴华夏村镇银行', '上海松江民生村镇银行', '济宁儒商村镇银行', '固始天骄村镇银行', '沛县汉源村镇银行', '海门建信村镇银行', '新华村镇银行XTB', '嘉善联合村镇银行', '中山小榄村镇银行', '乐清联合村镇银行', '九江共青村镇银行', '石河子国民村镇银行', '广汉珠江村镇银行', '平舆玉川村镇银行', '集贤润生村镇银行', '昆山鹿城村镇银行', '柯桥联合村镇银行', '莱芜珠江村镇银行', '舞阳玉川村镇银行', '新城蒙银村镇银行', '长兴联合村镇银行', '安阳珠江村镇银行', '富阳恒通村镇银行', '饶平融和村镇银行', '献县融和村镇银行', '常宁珠江村镇银行', '汝州玉川村镇银行', '防城国民村镇银行', '合浦国民村镇银行', '交城县太行村镇银行', '信阳珠江村镇银行', '朝阳柳城村镇银行', '邛崃国民村镇银行', '兴义万丰村镇银行', '泌阳玉川村镇银行', '扶绥深通村镇银行', '黄岩恒升村镇银行', '三水珠江村镇银行', '二连农合行', '椒江农合行团委', '温岭农合行青年联谊会', '椒江农合行城市港湾分理处', '桂东农合行', '锡林浩特农合行', '全州农合行蕉江支行', '汇融农合行营业部', '石河子农合行编辑部', '奈曼农合行太山木头分理处', '广西桂林漓江农村合作银行', '甘肃榆中农村合作银行', '通辽奈曼农村合作银行', '黄岩农村合作银行北城支行', '天水秦州农村合作银行', '东平农村合作银行', '湖北英山农村合作银行', '陇南武都农村合作银行', '甘肃华亭农村合作银行', '浙江温岭农村合作银行城东支行', '椒江农村合作银行微银行', '广西象州农村合作银行', '广西来宾桂中农村合作银行', '黄岩农村合作银行东城支行', '广西荔浦农村合作银行订阅号', '荔浦农村合作银行', '椒江农村合作银行三甲支行']

def collect_links(id_name,cookie=None):
    if not cookie:
        cookie = ''
    def ten_links(url,header=None):
        res = requests.get(url,headers=header)
        soup1 = BeautifulSoup(res.text,'html.parser')
        # print(soup1)
        title = soup1.findAll("script", {"type": "text/javascript"}, text = re.compile('.*var msgList.*'))
        # json1 = json.loads(re.findall('var msgList.*?\n', str(title))[0][14:-2])
        if '验证' in str(soup1):
            print(f'用户您好，访问公众号{id_name}过于频繁')
            return '用户您好，您的访问过于频繁'
        else:
            # print (soup1)
            json2 = json.loads(re.findall('var msgList.*?\n', str(title))[0][14:-2])
            # links = json.dumps(lnks)#, indent = 2, separators = {',', ': '})
            # print (json2['list'][0]['comm_msg_info'])
            lin = ''
            for i in json2['list']:
                the_url = i['app_msg_ext_info']['content_url'].replace(';','&')
                the_title = i['app_msg_ext_info']['title']
                digest = i['app_msg_ext_info']['digest']
                a_time = i['comm_msg_info']['datetime']
                datearray = datetime.datetime.utcfromtimestamp(a_time)
                the_time= datearray.strftime("%Y--%m--%d %H: %M: %S")
                lin = (
                    f'{lin}【标题】：{the_title}'
                    + '\n'
                    + '【标题链接】：https://mp.weixin.qq.com'
                    + the_url
                    + '\n'
                    + '【摘要】：'
                    + digest
                    + '\n'
                    + '【发布时间】：'
                    + the_time
                    + '\n'
                )

            # print (lin)
            return lin
        # except IndexError as e:
        #     print (e)
        #     return '需要验证'
        # except ValueError:
        #     pass



    # s = requests.session()
    url = 'https://weixin.sogou.com/weixin?type=1&s_from=input&query={}'.format(id_name)
    #print(requests.get(url).text)#测试是否包含需要的数据
    res = requests.get(url)
    soup = BeautifulSoup(res.text,'lxml')
    if  '验证' in str(soup):
        print('用户您好，查询公众号过于频繁')
        return '用户您好，您的访问过于频繁'
    else:
        id_position = 'div > div.txt-box > p.tit > a'#微信号和链接
        id_link = soup.select(id_position)
        weixin_id = soup.select('#sogou_vr_11002301_box_0 > div > div.txt-box > p.info > label')
        # print(soup)
        last_f = open('new_file/{}.txt'.format(id_name),'w',encoding='utf-8')
        if id_link == []:
            return str(i)+'没有相关公众号 已跳过' +str(soup)
        try:
            # print(id_link[0].get("href").replace(';','&'))#测试连接有效性 有效
            # print(id_link)
            # print (soup)
            cookies1 = requests.utils.dict_from_cookiejar(res.cookies)
            cookie2 = str(cookies1)[2:-2].replace("': '","=").replace("', '",';')
            hd_coki = {
                'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
                'Accept-Encoding': 'gzip, deflate',
                'Accept-Language': 'zh-CN,zh;q=0.9',
                'AlexaToolbar-ALX_NS_PH': 'AlexaToolbar/alx-4.0.3',
                'Cache-Control': 'max-age=0',
                'Connection': 'keep-alive',
                'Referer': 'http://weixin.sogou.com/weixin?type=1&s_from=input&query={}',
                'Host': 'mp.weixin.qq.com',
                'Upgrade-Insecure-Requests': '1',
                'Cookie' : '{}'.format(cookie2),
                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.87 Safari/537.36',
            }

            one_link = id_link[0].get("href").replace(';','&')
            one_title = id_link[0].get_text()
            wi_id = str(weixin_id[0].get_text())
            print (wi_id)
            print(str(i)+" 链接是："+str(one_link)+'\n')
            last_f.write('【微信名】：' + one_title +'\n' + '【微信id】：' + wi_id + '\n' + '\n\n'+ten_links(one_link))#str(one_link)+
            last_f.close()
            return one_link
        except (TypeError or IndexError) as e:
            print(e)
            return str(i)+'没有相关公众号 已跳过'
# collect_links('北京航空大学')

all_links = []
error_n = 0
for i in lll:
    try:
        link = collect_links(i)
        all_links.append(link)
        time.sleep(1)
        if '已跳过' in link:
            error_n = error_n+1
            print(f'这是第{str(error_n)}条空的公众号，已跳过，不会保存相关txt，随便提一下，如果查询公众号中有重复只会保存一次txt')
            print(f'也可能是ip被封 可以查看soup是否乱码：{str(link)}')
            #time.sleep(0.6)
    except requests.exceptions.ProxyError as e:
        print (e)
